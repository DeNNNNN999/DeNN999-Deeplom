# Страница создания контракта

## Обзор
Страница создания контракта позволяет администраторам и менеджерам по закупкам добавлять новые контракты в систему. Форма включает в себя все необходимые поля для полного описания условий сотрудничества с поставщиком, включая финансовые детали, сроки и особые условия.

## Функциональность
- Полная валидация формы с использованием Zod и React Hook Form
- Динамическая загрузка списка утвержденных поставщиков с сервера
- Выбор дат начала и окончания контракта с помощью календаря
- Выбор валюты из предустановленного списка
- Возможность указания детальных условий контракта
- Поддержка предзаполнения поставщика через URL-параметр
- Обработка различных состояний: загрузка, ошибки, успешное создание
- Адаптивный интерфейс для разных размеров экрана

## Технический стек
- React и Next.js 14 (App Router)
- GraphQL для запросов и мутаций
- Zod для валидации форм
- React Hook Form для управления состоянием формы
- date-fns для работы с датами
- Tailwind CSS для стилизации
- Компоненты UI: Card, Calendar, Popover, Select и др.
- Иконки из Lucide React

## Компоненты
Страница использует следующие компоненты:
- `DashboardLayout` - основной макет для административных страниц
- `Card`, `CardHeader`, `CardContent` - для структурирования контента
- `Input`, `Label`, `Textarea` - для полей формы
- `Select` - для выбора поставщика и валюты
- `Calendar` и `Popover` - для выбора дат
- Иконки из Lucide React

## API интеграции
Страница взаимодействует с GraphQL сервером через два запроса:
1. `GET_SUPPLIERS_QUERY` - для загрузки списка утвержденных поставщиков
2. `CREATE_CONTRACT_MUTATION` - для создания нового контракта

## Маршрутизация
- Страница доступна по маршруту `/admin/contracts/create`
- Можно передать параметр `supplierId` для предзаполнения поставщика, например: `/admin/contracts/create?supplierId=123`
- После успешного создания пользователь перенаправляется на `/admin/contracts/{id}`
- При отмене пользователь перенаправляется на `/admin/contracts`

## Особенности реализации
1. **Интеграция с поставщиками:**
   - Загружаются только утвержденные поставщики (статус APPROVED)
   - Возможность предзаполнения поставщика через URL-параметр

2. **Работа с датами:**
   - Проверка, что дата окончания позже даты начала
   - По умолчанию дата начала - текущая, дата окончания - через 90 дней
   - Использование календаря для удобного выбора

3. **Валидация:**
   - Все необходимые поля помечены звездочкой и обязательны для заполнения
   - Стоимость контракта должна быть положительным числом
   - Длина текстовых полей ограничена разумными пределами

## Использование
1. Перейдите на страницу `/admin/contracts/create`
2. Заполните основную информацию о контракте (название, номер, поставщик, стоимость)
3. Укажите даты начала и окончания контракта
4. При необходимости добавьте описание и условия контракта
5. Нажмите кнопку "Create Contract"
6. В случае успеха вы будете перенаправлены на страницу созданного контракта

## Схема данных
Форма создает объект следующей структуры для отправки на сервер:
```typescript
{
  title: string;              // Название контракта
  supplierId: string;         // ID поставщика
  contractNumber: string;     // Номер контракта
  description: string | null; // Описание (опционально)
  startDate: string;          // Дата начала (ISO формат)
  endDate: string;            // Дата окончания (ISO формат)
  value: number;              // Стоимость контракта
  currency: string;           // Валюта (по умолчанию USD)
  terms: string | null;       // Общие условия контракта (опционально)
  paymentTerms: string | null; // Условия оплаты (опционально)
  deliveryTerms: string | null; // Условия доставки (опционально)
}
```
