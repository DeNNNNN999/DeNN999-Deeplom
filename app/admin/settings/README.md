# Страница настроек системы

## Обзор
Страница настроек системы предоставляет администраторам возможность управлять глобальными параметрами приложения, настраивать резервное копирование данных и просматривать системную информацию. Эта страница является ключевым инструментом администрирования системы управления поставщиками.

## Функциональность
Страница разделена на три основные вкладки:

### 1. Общие настройки
- Просмотр списка всех системных настроек с пагинацией
- Добавление новых настроек с различными типами данных (строка, число, булево, JSON)
- Редактирование существующих настроек
- Удаление настроек
- Поиск настроек по ключу или описанию
- Управление публичными и приватными настройками

### 2. Резервное копирование
- Настройка автоматического резервного копирования
- Выбор частоты создания резервных копий (ежедневно, еженедельно, ежемесячно)
- Настройка срока хранения резервных копий
- Указание пути для хранения резервных копий
- Настройка уведомлений о статусе резервного копирования
- Ручное создание резервных копий
- Восстановление системы из резервной копии

### 3. Системная информация
- Просмотр статистики пользователей (общее количество, активные, по ролям)
- Статистика настроек и разрешений
- Информация о журналах аудита
- Статистика базы данных (размеры таблиц, количество записей)
- Системные инструменты (очистка кэша, проверка системы, сброс настроек)

## Технический стек
- React и Next.js 14 (App Router)
- GraphQL для запросов и мутаций
- Zod для валидации форм
- React Hook Form для управления состоянием формы
- Tailwind CSS для стилизации
- Компоненты UI: Tabs, Card, DataTable и др.
- Иконки из Lucide React

## Компоненты
Страница использует следующие компоненты:
- `DashboardLayout` - основной макет для административных страниц
- `Tabs` - для организации контента по вкладкам
- `Card`, `CardHeader`, `CardContent` - для структурирования контента
- `DataTable` - для отображения списка настроек
- `Input`, `Textarea`, `Select`, `Switch` - для элементов формы
- Иконки из Lucide React для визуальной интуитивности

## API интеграции
Страница взаимодействует с GraphQL сервером через следующие запросы:

### Запросы:
1. `GET_SYSTEM_SETTINGS_QUERY` - получение списка системных настроек с пагинацией
2. `GET_BACKUP_SETTINGS_QUERY` - получение настроек резервного копирования
3. `GET_SYSTEM_STATISTICS_QUERY` - получение статистики системы
4. `GET_DATABASE_STATISTICS_QUERY` - получение статистики базы данных

### Мутации:
1. `CREATE_SYSTEM_SETTING_MUTATION` - создание новой системной настройки
2. `UPDATE_SYSTEM_SETTING_MUTATION` - обновление существующей настройки
3. `DELETE_SYSTEM_SETTING_MUTATION` - удаление настройки
4. `CONFIGURE_BACKUP_SETTINGS_MUTATION` - настройка параметров резервного копирования

## Маршрутизация
- Страница доступна по маршруту `/admin/settings`
- Вкладки открываются через изменение состояния интерфейса, без перезагрузки страницы

## Особенности реализации
1. **Системные настройки:**
   - Типизация настроек (string, number, boolean, json)
   - Публичные и приватные настройки
   - Полнотекстовый поиск настроек
   - Форма добавления/редактирования с динамическими полями

2. **Резервное копирование:**
   - Гибкая конфигурация расписания копирования
   - Уведомления по электронной почте
   - Управление хранением резервных копий
   - Ручное создание и восстановление

3. **Системная информация:**
   - Визуализация статистики в удобном формате
   - Детальная информация о состоянии базы данных
   - Инструменты администрирования
   - Предупреждения о потенциально опасных операциях

## Использование
1. Перейдите на страницу `/admin/settings`
2. Выберите нужную вкладку (Общие, Резервное копирование, Системная информация)
3. Для системных настроек:
   - Просмотрите существующие настройки или добавьте новые
   - Используйте поиск для фильтрации настроек
   - Редактируйте или удаляйте настройки при необходимости
4. Для резервного копирования:
   - Настройте параметры автоматического копирования
   - Установите периодичность и путь хранения
   - Создайте ручную резервную копию при необходимости
5. Для системной информации:
   - Просмотрите статистику пользователей и системы
   - Проанализируйте состояние базы данных
   - Используйте системные инструменты при необходимости

## Безопасность
- Доступ к странице настроек ограничен пользователями с ролью администратора
- Опасные операции требуют дополнительного подтверждения
- Предупреждения о потенциально опасных действиях
- Разделение настроек на публичные и приватные
