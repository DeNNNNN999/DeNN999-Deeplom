# Инструкция по настройке и запуску системы управления поставщиками

## Требования

- Node.js 16+
- PostgreSQL 16
- Redis (для кэширования)
- Docker (опционально, для контейнеризации)

## Шаги настройки

### 1. Установка зависимостей

```bash
npm install
```

### 2. Настройка базы данных

1. Убедитесь, что PostgreSQL запущен
2. Создайте базу данных:
```sql
CREATE DATABASE supplier_management;
```
3. Проверьте и при необходимости отредактируйте файл `.env` в корне проекта:
```
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=root  # Замените на ваш пароль
DATABASE_NAME=supplier_management
```

### 3. Проверка подключений к сервисам

Выполните проверку подключений к PostgreSQL, Redis и корректности настроек JWT:

```bash
npm run check:connections
```

Вы увидите статус подключений и рекомендации по исправлению проблем.

### 4. Применение миграций базы данных

```bash
npm run drizzle:push
```

### 5. Создание администратора системы

Выполните следующую команду для создания пользователя с правами администратора:

```bash
npm run seed:admin
```

Это создаст администратора со следующими учетными данными:
- Email: admin@example.com
- Пароль: admin123

### 6. Запуск системы

Для запуска в режиме разработки:

```bash
# В одном терминале запустите бэкенд:
npm run server

# В другом терминале запустите фронтенд:
npm run dev
```

Система будет доступна по адресу http://localhost:3000

## Доступ к системе

После запуска системы вы можете войти, используя следующие учетные данные:

### Администратор
- Email: admin@example.com
- Пароль: admin123

### Решение проблем

#### Проблема с входом в систему
Если у вас возникают проблемы с входом в систему с учетными данными администратора, выполните:
```bash
npm run seed:admin
```

#### Проблемы с соединением с базой данных
1. Проверьте, что PostgreSQL запущен
2. Проверьте настройки в файле `.env`
3. Попробуйте подключиться к базе данных напрямую, чтобы убедиться в доступности

#### Сброс базы данных
Если вам нужно сбросить базу данных и начать с чистого листа:
```sql
DROP DATABASE supplier_management;
CREATE DATABASE supplier_management;
```

Затем повторите шаги 3 и 4 из инструкции выше.
